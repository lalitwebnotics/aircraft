(this["webpackJsonpaircraft-upgrade-www"]=this["webpackJsonpaircraft-upgrade-www"]||[]).push([[17],{327:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(164),r=a.n(n),s=a(14),o=a.n(s),i=a(54),l=a.n(i),c=a(1),u=a.n(c),m=a(44),p=a(12),h=(a(332),a(52));function d(e){var t=e.children,a=e.className,n=e.icon,s=void 0===n?"fas-exclamation-circle":n,i=e.position,c=void 0===i?"bottom-left":i,d=e.variant,f=void 0===d?"red":d,v=e.wrap,b=void 0===v?[]:v;if(!t||o()(t)&&!t.length)return u.a.createElement(u.a.Fragment,null);var g=l()(t)?t:t[0]||t,y=r()(g,"response.data.error.message")||r()(g,"message")||g;return l()(y)||(y=Object(p.d)(y)),y?u.a.createElement("span",{className:Object(m.a)("Alert",a,"alert-"+c,"alert-"+f)},u.a.createElement(h.a,{value:s}),u.a.createElement("span",null,b[0]?b[0]:u.a.createElement(u.a.Fragment,null),y,b[1]?b[1]:u.a.createElement(u.a.Fragment,null))):u.a.createElement(u.a.Fragment,null)}},329:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(53),r=a.n(n),s=a(41),o=a.n(s),i=a(1),l=a.n(i),c=a(44),u=(a(330),a(327)),m=a(52);function p(e){var t=e.children,a=e.className,n=e.errors,s=e.icon,i=e.type,p=void 0===i?"text":i,h=e.placeholderLabel,d=e.value,f=r()(d),v=h?e.placeholder:e.label,b=o()(e,["children","className","errors","placeholderLabel","reference"]);return l.a.createElement("label",{className:Object(c.a)("Text",a,"type-"+p,{empty:f,"placeholder-label":h})},v?l.a.createElement("span",{className:"label"},v):"",s?l.a.createElement(m.a,{value:s}):"",l.a.createElement("input",Object.assign({type:p},b,{onChange:e.onChange,ref:e.reference})),t,l.a.createElement(u.a,{wrap:["(",")"]},n))}},330:function(e,t,a){},332:function(e,t,a){},344:function(e,t,a){"use strict";a.d(t,"a",(function(){return U}));var n=a(10),r=a(11),s=a(45),o=a(33),i=a(32),l=a(164),c=a.n(l),u=a(53),m=a.n(u),p=a(37),h=a.n(p),d=a(54),f=a.n(d),v=a(20),b=a.n(v),g=a(346),y=a.n(g),E=a(347),j=a.n(E),O=a(328),S=a.n(O),k=a(1),N=a.n(k),w=a(44),C=a(12),F=a(46),P={badInput:"invalid :name",patternMismatch:"invalid :name format",rangeOverflow:":name is too high",rangeUnderflow:":name is too low",stepMismatch:"invalid :name amount",tooLong:":name is too long",tooShort:":name is too short",typeMismatch:"invalid :name format",valueMissing:":name is required"},D=b()(P),U=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).unmounted=!1,e.state={busy:!1,data:{},error:null,errors:{},focus:{}},Object(C.a)(Object(s.a)(e),["onComplete","onFail","onSubmit","onSuccess","setData","setValue"]),e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=this.state,r=n.busy,s=n.errors;return N.a.createElement("form",{className:Object(w.a)("Form",a,{busy:r,error:!m()(s)}),onSubmit:this.onSubmit},h()(t)?t(this.getArguments()):t)}},{key:"componentDidMount",value:function(){m()(this.props.inputs)||this.setState({data:this.props.inputs})}},{key:"componentDidUpdate",value:function(e){this.props.inputs!==e.inputs&&this.setState({data:this.props.inputs||{}})}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"getArguments",value:function(){var e=this,t=this.state,a=t.busy,n=t.data,r=t.error;return{busy:a,data:n,error:r,setData:this.setData,setValue:this.setValue,input:function(t){return{disabled:a,errors:c()(e.state.errors,t),name:t,value:c()(e.state.data,t)||"",onBlur:function(t){var a=t.target;e.validateInput(a)},onChange:function(a){var n=a.target.value;e.setValue(t,n)},onFocus:function(){!0!==c()(e.state.focus,t)&&(y()(e.state.focus,t,!0),e.setState({focus:e.state.focus}))},onInput:function(t){var a=t.target;e.validateInput(a)}}}}}},{key:"onComplete",value:function(e){var t=this;h()(this.props.onComplete)?Promise.resolve(this.props.onComplete(e)).catch((function(){return null})).then((function(){t.setBusy(!1)})):this.setBusy(!1)}},{key:"onFail",value:function(e){this.setState({error:e}),h()(this.props.onFail)&&this.props.onFail(e);var t=c()(e,"response.data.error.message");f()(t)||m()(t)||this.setState({errors:t}),this.onComplete()}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({busy:!0,error:null});var t=this.state.data;(h()(this.props.action)?Object(F.h)(this.props.action(t)):h()(this.props.onSubmit)?this.props.onSubmit(t):Promise.resolve()).then(this.onSuccess).catch(this.onFail)}},{key:"onSuccess",value:function(e){var t=this;h()(this.props.onSuccess)?Promise.resolve(this.props.onSuccess(e)).then((function(){t.onComplete()})).catch(this.onComplete):this.onComplete()}},{key:"setBusy",value:function(e){this.unmounted||this.setState({busy:e})}},{key:"setData",value:function(e){return this.setState((function(t){var a=t.data;return{data:e(a)}}))}},{key:"setValue",value:function(e,t){return this.setData((function(a){return Object(C.c)(a,e,t)}))}},{key:"validateInput",value:function(e){var t=e.name;if(e.validity&&!0===c()(this.state.focus,t)){var a=e.attributes||{},n=[],r=c()(this.state.errors,t);D.forEach((function(r){!0===e.validity[r]&&n.push(S()(P[r].replace(":name",(a.caption||{}).value||j()(t)).toLowerCase()))})),(n.length&&(!r||!r.length)||!n.length&&r&&r.length)&&this.setState({errors:y()(this.state.errors,t,n)})}}}]),a}(k.Component)},392:function(e,t,a){},393:function(e,t,a){},427:function(e,t,a){"use strict";a.r(t),a.d(t,"subscriptions",(function(){return F}));var n=a(0),r=a(69),s=a(10),o=a(11),i=a(45),l=a(33),c=a(32),u=a(20),m=a.n(u),p=a(94),h=a.n(p),d=a(1),f=a.n(d),v=a(27),b=(a(391),a(12)),g=(a(392),a(52)),y=a(344),E=a(23),j=a.n(E),O=a(44);a(393);function S(e){var t=e.children,a=e.className,n=e.icon,r=e.label,s=e.options,o=h()(e,["name","required","value"]);return f.a.createElement("label",{className:Object(O.a)("Select",a)},r?f.a.createElement("span",{className:"label"},r):"",n?f.a.createElement(g.a,{value:n}):"",f.a.createElement("select",Object.assign({},o,{onChange:e.onChange}),j.a?m()(s).map((function(e){return f.a.createElement("option",{key:e,value:e},s[e])})):t),f.a.createElement(g.a,{className:"caret",value:"fas-caret-down"}))}var k=a(329),N=a(25),w=a(4),C=(a(394),a(395)),F={none:"None",daily:"Once a day",weekly:"Once a week",monthly:"Once a month"},P=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).getUploadParams=function(e){e.meta;return{url:"/api/v1/users/upload/profile",headers:{Authorization:"Bearer ".concat(w.j.getUserToken())}}},e.handleChangeStatus=function(e,t){var a=e.meta,n=e.file;console.log(t,a,n)},e.handleSubmit=function(e){console.log(e.map((function(e){return e.meta})))},e.handleFileSelection=function(t){var a=(t||{}).target,n=(a=void 0===a?{}:a).files;n=void 0===n?[]:n;var s=Object(r.a)(n,1)[0];if(s){e.setState({profilePicture:URL.createObjectURL(s)});var o=new FormData;o.append("file",s,s.originalname),w.j.uploadProfilePicture(o).then((function(e){return Object(C.when)(Object(N.i)())})).then((function(){e.setState({success:"Profile Picture update successfully"},(function(){setTimeout((function(){return e.setState({success:""})}),3e3)}))})).catch((function(){e.setState({error:"Failed to update profile picture"},(function(){setTimeout((function(){return e.setState({error:""})}),3e3)}))}))}},e.state={inputs:{email:"",name:"",phone:"",subscription:"",_id:""},profilePicture:null},Object(b.a)(Object(i.a)(e),["onSubmit"]),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.inputs,a=e.profilePicture,n=e.error,r=e.success,s=(this.props||{}).user,o=(s=void 0===s?{}:s).data,i=void 0===o?{}:o;return f.a.createElement("div",{className:"Account"},f.a.createElement("div",{className:"header"},f.a.createElement("h2",null,i.name,"'s Profile")),f.a.createElement("div",{className:"content"},f.a.createElement("div",{className:"photo"},!1,f.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(a||(i.imageUrl?"https://d2kijztdgb1j07.cloudfront.net/".concat(i.imageUrl):"/assets/images/man-at-sunset.jpg"),")")}}),f.a.createElement("span",{className:"change"},f.a.createElement("input",{id:"profile-file-selector",type:"file",onChange:this.handleFileSelection,style:{display:"none"}}),f.a.createElement("label",{htmlFor:"profile-file-selector"},f.a.createElement(g.a,{value:"fa-camera"})),f.a.createElement("span",null)),f.a.createElement("br",null),n&&f.a.createElement("span",{className:"error"},n),r&&f.a.createElement("span",{className:"success"},r)),f.a.createElement(y.a,{onSubmit:this.onSubmit,action:N.h,inputs:t},(function(e){var t=e.input;return f.a.createElement(f.a.Fragment,null,f.a.createElement("input",Object.assign({type:"hidden"},t("_id"))),f.a.createElement(k.a,Object.assign({label:"Full Name"},t("name"),{placeholder:"Enter full name"}),f.a.createElement(g.a,{className:"edit",value:"fa-pen"})),f.a.createElement(k.a,Object.assign({label:"Phone"},t("phone"),{placeholder:"No number listed (add your number for text-alerts)",type:"tel"})),f.a.createElement(k.a,Object.assign({label:"Email"},t("email"),{placeholder:"Enter email address",type:"email"})),f.a.createElement(S,Object.assign({label:"Receive Email Updates"},t("subscription"),{options:F})),f.a.createElement("button",{type:"submit",variant:"dark-blue",className:"Button btn btn-dark-blue save"},"Save"))}))))}},{key:"componentDidMount",value:function(){this.updateInputs(this.props.user.data)}},{key:"componentDidUpdate",value:function(e){var t=this.props.user.data;t!==e.user.data&&this.updateInputs(t)}},{key:"updateInputs",value:function(e){this.setState((function(t){return{inputs:Object(n.a)(Object(n.a)({},t.inputs),h()(e,m()(t.inputs)))}}))}},{key:"onSubmit",value:function(){console.log("asd")}}]),a}(d.Component);t.default=Object(v.c)((function(e){return{user:e.api.user.auth}}))(P)}}]);
//# sourceMappingURL=17.78a8a1ad.chunk.js.map