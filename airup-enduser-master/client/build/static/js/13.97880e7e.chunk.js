(this["webpackJsonpaircraft-upgrade-www"]=this["webpackJsonpaircraft-upgrade-www"]||[]).push([[13],{326:function(e,t,a){"use strict";var n=a(23),r=a.n(n),c=a(41),s=a.n(c),i=a(1),o=a.n(i),l=a(38),u=a(44),h=Object(i.forwardRef)((function(e,t){return o.a.createElement("button",Object.assign({},s()(e,["children"]),{ref:t}),e.children)})),p=Object(i.forwardRef)((function(e,t){var a=e.className,n=e.size,c=e.variant,i=!r()(e.to),p=i?l.a:h,d={};return!i&&r()(e.type)&&(d.type="button"),o.a.createElement(p,Object.assign({},s()(e,["children","className"]),d,{className:Object(u.a)("Button","btn",c?"btn-"+c:"",n?"btn-"+n:"",a),ref:t}),e.children)}));t.a=p},331:function(e,t,a){"use strict";var n=a(10),r=a(11),c=a(45),s=a(33),i=a(32),o=a(37),l=a.n(o),u=a(1),h=a.n(u),p=a(44),d=a(12),m=(a(351),a(52)),v=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),Object(d.a)(Object(c.a)(e),["toggle"]),e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.disabled,r=e.icon,c=void 0===r?"fa-check":r,s=e.size,i=e.value;return h.a.createElement("label",{className:Object(p.a)("Checkbox",a,{active:i,disabled:n},s?"checkbox-"+s:""),onClick:this.toggle},h.a.createElement("span",{className:"tick"},h.a.createElement(m.a,{value:c})),t?h.a.createElement("span",{className:"caption"},t):"")}},{key:"toggle",value:function(){var e=this.props,t=e.onToggle,a=e.productId;l()(this.props.onChange)&&this.props.onChange({target:{name:this.props.name,type:"checkbox",value:!this.props.value}}),void 0!==t&&l()(t)&&this.props.onToggle(a)}}]),a}(u.Component);t.a=v},342:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(10),r=a(11),c=a(45),s=a(33),i=a(32),o=a(37),l=a.n(o),u=a(23),h=a.n(u),p=a(20),d=a.n(p),m=a(94),v=a.n(m),f=a(1),b=a.n(f),g=a(44),O=a(12),j=a(46),y=a(34),E=(a(343),a(52)),k=a(92),w=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),Object(O.a)(Object(c.a)(e),["hide","onSelect","show","toggle"]),e.overlay=b.a.createRef(),e.selected=b.a.createRef(),e.state={active:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.busy,n=t.children,r=t.className,c=t.data,s=void 0===c?{}:c,i=t.disabled,o=t.item,u=t.selected,h=t.title,p=this.state.active,m=this.hide,v=this.show,f=this.toggle;return b.a.createElement("span",{className:Object(g.a)("Selector",r,{active:p,disabled:i}),onClick:Object(O.e)(v)},l()(n)?n({hide:m,show:v,toggle:f}):b.a.createElement(E.a,{value:"fas-caret-down"}),b.a.createElement("div",{className:"selector-overlay",ref:this.overlay},a?b.a.createElement(k.a,null):b.a.createElement("ul",null,d()(s).map((function(t){var a=t===u,n=l()(o)?o(s[t],t):s[t];return b.a.createElement("li",Object.assign({key:t,className:Object(g.a)({active:a}),title:l()(h)?h(s[t]):n},a?{ref:e.selected}:{},{onClick:Object(O.e)(e.onSelect,t)}),n)})))))}},{key:"componentDidMount",value:function(){this.click=Object(j.g)([y.a],this.hide),h()(this.props.reference)||(this.props.reference.current=this.getReference())}},{key:"componentDidUpdate",value:function(e,t){this.props.reference!==e.reference&&(this.props.reference.current=this.getReference()),this.state.active&&(this.props.selected&&this.selected.current?this.overlay.current.scrollTop=this.selected.current.offsetTop-10:this.state.active!==t.active&&(this.overlay.current.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.click.cancel(),h()(this.props.reference)||(this.props.reference.current=null)}},{key:"getReference",value:function(){return v()(this,["hide","show"])}},{key:"hide",value:function(){this.setState({active:!1}),l()(this.props.onHide)&&this.props.onHide()}},{key:"onSelect",value:function(e){l()(this.props.onSelect)&&this.props.onSelect(this.props.data[e],e),this.hide()}},{key:"show",value:function(){this.props.disabled||(this.setState({active:!0}),l()(this.props.onShow)&&this.props.onShow())}},{key:"toggle",value:function(){return this[this.state.active?"hide":"show"]()}}]),a}(f.Component)},343:function(e,t,a){},345:function(e,t){e.exports=function(e){for(var t=-1,a=null==e?0:e.length,n={};++t<a;){var r=e[t];n[r[0]]=r[1]}return n}},349:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(3),r=a(0),c=a(10),s=a(11),i=a(33),o=a(32),l=a(37),u=a.n(l),h=a(42),p=a.n(h),d=a(54),m=a.n(d),v=a(20),f=a.n(v),b=a(1),g=a.n(b),O=a(38),j=a(44),y=a(46),E=a(12),k=(a(350),a(52)),w=a(92),C=a(342),S=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={keys:[],selected:[]},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.busy,c=t.children,s=t.data,i=this.state.selected,o=c(),l=o.head,u=o.row;return g.a.createElement("div",{className:Object(j.a)("Table",{busy:a})},a?g.a.createElement(w.a,null):"",g.a.createElement("table",null,g.a.createElement("thead",null,l&&l({selected:i.length&&i.length===this.state.keys.length,sort:function(t,a){if(m()(t))return e.getSortLink(t,a);if(p()(t)){var n=e.props.route.query;return g.a.createElement(C.a,{className:"sort-selector",data:t,item:function(t,a){return e.getSortLink(a,t)},title:function(e){return e}},(function(e){var r=e.toggle;return g.a.createElement("span",{onClick:Object(E.e)(r)},g.a.createElement("span",null,t[n.sort]||a||"Sort by"),g.a.createElement(k.a,{value:"fa-chevron-"+("desc"===n.order?"up":"down")}))}))}},state:this.state,toggle:function(t){e.setState((function(e){return Object(r.a)(Object(r.a)({},e),{},{selected:t?e.keys.slice(0):[]})}))}})),g.a.createElement("tbody",null,this.state.keys.map((function(t,a){var r=i.indexOf(t),c=a%2;return s[t]?g.a.createElement(b.Fragment,{key:t},u(s[t],{even:c,index:a,odd:!c,selected:r>=0,toggle:function(a){a&&r<0?e.setState({selected:[].concat(Object(n.a)(i),[t])}):!a&&r>=0&&e.setState({selected:[].concat(Object(n.a)(i.slice(0,r)),Object(n.a)(i.slice(r+1)))})}})):g.a.createElement(b.Fragment,{key:t})})))))}},{key:"componentDidMount",value:function(){var e=this;if(this.props.infinite){var t=this.props.infinite.action;this.action=Object(y.g)([Object(y.d)(t,"COMPLETE")],(function(){e.checkEnd()})),this.unscroll=Object(E.j)((function(){e.props.busy||e.checkEnd()}))}}},{key:"componentDidUpdate",value:function(e){if(this.props.data!==e.data||this.props.direct&&!this.state.keys.length){var t={keys:f()(this.props.data)};this.setState(t)}}},{key:"componentWillUnmount",value:function(){this.action&&(this.action.cancel(),this.unscroll())}},{key:"checkEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=Object(E.g)(),a=t.height,n=t.position;return n>a-e&&(this.props.infinite&&u()(this.props.infinite.onReachEnd)&&this.props.infinite.onReachEnd(),!0)}},{key:"getSortLink",value:function(e,t){var a=Object(E.l)(this.props.route,e),n=a.active,r=a.icon,c=a.url;return g.a.createElement(O.a,{to:c,className:Object(j.a)("sort",{active:n})},g.a.createElement("span",null,t),g.a.createElement(k.a,{value:"fas-"+r}))}}]),a}(b.Component)},350:function(e,t,a){},351:function(e,t,a){},354:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(10),r=a(11),c=a(45),s=a(33),i=a(32),o=a(37),l=a.n(o),u=a(1),h=a.n(u),p=a(44),d=a(12),m=a(23),v=a.n(m),f=a(94),b=a.n(f),g=(a(361),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).busy=!1,e.popup=Object(u.createRef)(),e.state={active:!1,show:!1},Object(d.a)(Object(c.a)(e),["activate","deactivate","hide","show"]),e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.disabled,r=e.trigger,c=this.state,s=c.active,i=c.show;return h.a.createElement(h.a.Fragment,null,r(b()(this,["show"])),i?h.a.createElement("div",{className:Object(p.a)("Popup",a,{active:s,disabled:n}),ref:this.popup,onClick:this.hide},h.a.createElement("div",{className:"popup-content",onClick:Object(d.e)(this.props.onClick)},t(b()(this,["hide"])))):"")}},{key:"componentDidMount",value:function(){if(v()(this.props.trigger))throw new Error("Trigger prop must be provided")}},{key:"componentDidUpdate",value:function(e,t){var a=t.show;this.state.show&&this.state.show!==a&&setTimeout(this.activate,50)}},{key:"activate",value:function(){var e=this;this.setState({active:!0}),Object(d.k)(this.popup.current,"transitionend").then((function(){e.busy=!1,l()(e.props.onShow)&&e.props.onShow()}))}},{key:"deactivate",value:function(){this.setState({active:!1})}},{key:"hide",value:function(){for(var e=this,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return this.busy||this.props.disabled?Promise.reject("Popup is busy or disabled"):(this.busy=!0,this.deactivate(),Object(d.k)(this.popup.current,"transitionend").then((function(){var t;(e.busy=!1,e.setState({show:!1}),l()(e.props.onHide))&&(t=e.props).onHide.apply(t,a);return e})))}},{key:"show",value:function(){this.busy||this.props.disabled||(this.busy=!0,this.setState({show:!0}))}}]),a}(u.Component)),O=(a(362),a(326)),j=a(355),y=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={busy:!1},Object(d.a)(Object(c.a)(e),["onConfirm"]),e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cancel,n=void 0===a?{}:a,r=t.children,c=t.className,s=t.cancelClick,i=t.content,o=(t.noClose,t.message),l=t.ok,u=void 0===l?{}:l,m=(t.onTailNumberChange,t.onImageSelect,this.state.busy);return h.a.createElement(g,{className:Object(p.a)("Confirm",c),disabled:m,trigger:r},(function(t){var a=t.hide;return h.a.createElement(h.a.Fragment,null,h.a.createElement(j.a,{tag:"p"},o),i||h.a.createElement(h.a.Fragment,null),h.a.createElement("div",{className:Object(p.a)("buttons",{exclusive:!!u.exclusive})},u.exclusive?h.a.createElement(h.a.Fragment,null):h.a.createElement(O.a,{variant:n.variant||"dark-blue",className:"cancel",disabled:m,onClick:s?s(a):a},n.title||"Cancel"),!u.hide&&h.a.createElement(O.a,{variant:u.variant||"empty",className:"ok",disabled:m,onClick:Object(d.b)(e.onConfirm,a)},u.title||"OK")))}))}},{key:"onConfirm",value:function(e,t){var a=this;l()(this.props.onConfirm)&&(this.setState({busy:!0}),Promise.resolve(this.props.onConfirm(t)).catch((function(){return null})).then((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.setState({busy:!1}),!1!==t&&Promise.resolve(e()).catch((function(){return null})).then((function(){l()(t)&&t()}))})))}}]),a}(u.Component)},355:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(54),r=a.n(n),c=a(23),s=a.n(c),i=a(1),o=a.n(i);function l(e){var t=e.children,a=e.className,n=e.tag;if(s()(t))return o.a.createElement(o.a.Fragment,null);if(!r()(t))throw new Error("Content must be a string");var c=n||"div",i=t.replace(/(?:\r\n|\r|\n)/g,"<br />");return o.a.createElement(c,{className:a,dangerouslySetInnerHTML:{__html:i}})}},361:function(e,t,a){},362:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},426:function(e,t,a){"use strict";a.r(t),a.d(t,"sortFields",(function(){return Y})),a.d(t,"sortKeys",(function(){return B}));var n=a(18),r=a(0),c=a(10),s=a(11),i=a(45),o=a(33),l=a(32),u=a(345),h=a.n(u),p=a(122),d=a.n(p),m=a(41),v=a.n(m),f=a(20),b=a.n(f),g=a(1),O=a.n(g),j=a(27),y=a(38),E=a(44),k=a(369),w=a.n(k),C=a(12),S=a(46),N=a(36),T=a(155),D=a(7),P=(a(410),a(331)),R=a(354),A=a(52),M=a(349),F=a(37),x=a.n(F),U=(a(411),function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),Object(C.a)(Object(i.a)(e),["toggle"]),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled,n=e.useDisabler,r=void 0===n||n,c=e.variant,s={active:e.value};return r&&(s.disabled=a),O.a.createElement("label",{className:Object(E.a)("Toggle",s,c?"toggle-"+c:void 0,t),onClick:this.toggle},O.a.createElement("span",{className:"tick"}))}},{key:"toggle",value:function(){this.props.disabled||x()(this.props.onChange)&&this.props.onChange({target:{name:this.props.name,type:"toggle",value:!this.props.value}})}}]),a}(g.Component)),Y={name:"Product Name",manufacturer:"Manufacturer",updated_at:"Last Approved"},B=b()(Y),L=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={busy:{},updates:{}},Object(C.a)(Object(i.a)(e),["onToggle","remove"]),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.device,n=t.products,r=t.route,c=this.state.updates,s=n.busy,i=d()(["xs","sm"],a);return O.a.createElement("div",{className:"Products"},O.a.createElement("div",{className:"description"},"Below contains all the products you are tracking updates for. You can configure tracking settings for each one of them."),O.a.createElement(M.a,Object.assign({},n,{route:r}),(function(){return{head:function(e){var t=e.selected,a=e.sort,r=e.toggle;return O.a.createElement(g.Fragment,null,O.a.createElement("tr",null,O.a.createElement("th",null,O.a.createElement(P.a,{icon:"fa-minus",value:t,size:"sm",onChange:Object(C.b)(r,!t)},t?"Deselect":"Select"," All (",n.count,")")),O.a.createElement("th",null),i?O.a.createElement(O.a.Fragment,null):O.a.createElement(g.Fragment,null,O.a.createElement("th",null),O.a.createElement("th",null),O.a.createElement("th",null),O.a.createElement("th",null)),O.a.createElement("th",null,i?a(Y):O.a.createElement(O.a.Fragment,null))),i?O.a.createElement(O.a.Fragment,null):O.a.createElement("tr",null,O.a.createElement("th",null),B.map((function(e){return O.a.createElement("th",{key:e},a(e,Y[e]))})),O.a.createElement("th",{className:"toggle"},T.b.PRODUCT_UPDATES.PRICE),O.a.createElement("th",{className:"toggle"},T.b.PRODUCT_UPDATES.REBATE),O.a.createElement("th",null)))},row:function(t,a){var n=a.odd,o=a.selected,l=a.toggle,u=t.certificate,h=t._id,p=t.manufacturer,d=t.name,m=t.permalink,v=t.updated_at,f=c[h]||0,b=!!e.state.busy[h]||s,j={disabled:b,onChange:Object(C.b)(e.onToggle,h),variant:"light-blue"};return O.a.createElement("tr",{className:Object(E.a)({odd:n,selected:o})},O.a.createElement("td",null,O.a.createElement(P.a,{value:o,size:"sm",onChange:Object(C.b)(l,!o)})),i?O.a.createElement("td",null,O.a.createElement(y.a,{to:"/products/"+m+Object(C.m)(r.query)},d+(u?" (STC "+u.reference+")":"")),O.a.createElement("br",null),O.a.createElement(y.a,{to:"/"},p.name),O.a.createElement("br",null),"Last approved: ",w()(v).format("MMM DD, YYYY")):O.a.createElement(g.Fragment,null,O.a.createElement("td",null,O.a.createElement(y.a,{to:"/products/"+m+Object(C.m)(r.query)},d+(u?" (STC "+u.reference+")":""))),O.a.createElement("td",null,O.a.createElement(y.a,{to:"/"},p.name)),O.a.createElement("td",null,w()(v).format("MMM DD, YYYY")),O.a.createElement("td",{className:"toggle"},O.a.createElement(U,Object.assign({value:f&T.a.PRICE,name:"price"},j))),O.a.createElement("td",{className:"toggle"},O.a.createElement(U,Object.assign({value:f&T.a.REBATE,name:"rebate"},j)))),O.a.createElement("td",{className:"delete"},O.a.createElement(R.a,{disabled:b,message:"Are you sure you'd like to remove this product from your hanger and stop tracking its updates?",ok:{title:"Stop Tracking"},onConfirm:Object(C.b)(e.remove,h)},(function(e){var t=e.show;return O.a.createElement(A.a,{disabled:b,value:"fa-trash",onClick:t})}))))}}})))}},{key:"componentDidMount",value:function(){var e=this;Object(S.h)(Object(D.K)()).then((function(){e.setState({updates:h()(b()(e.props.products.data).map((function(t){return[t,e.props.products.data[t].updates||0]})))})}))}},{key:"onToggle",value:function(e,t){var a=this,c=t.target,s=c.name,i=c.value,o=this.state.updates[e],l=T.a[s.toUpperCase()],u=o&l,h=[e],p=o;i&&!u?p=o+l:!i&&u&&(p=o-l),this.setBusy(e,!0),this.setState((function(t){return{updates:Object(r.a)(Object(r.a)({},t.updates),{},Object(n.a)({},e,p))}})),Object(S.h)(Object(D.M)({id:h,track:!0,updates:p})).then((function(){return Object(S.h)(Object(D.L)({id:h})).then((function(e){a.setState((function(t){var a=t.updates;return{updates:Object(r.a)(Object(r.a)({},a),{},Object(n.a)({},e._id,e.updates||0))}}))}))})).catch((function(){return Promise.resolve()})).then((function(){a.setBusy(e,!1)}))}},{key:"setBusy",value:function(e,t){this.setState((function(a){return{busy:Object(r.a)(Object(r.a)({},a.busy),{},Object(n.a)({},e,t))}}))}},{key:"remove",value:function(e){var t=this;this.setBusy(e,!0),Object(S.h)(Object(D.M)({id:[e],track:!1})).then((function(){return Object(S.h)(Object(D.K)())})).catch((function(){return Promise.resolve()})).then((function(){t.setState((function(t){return{busy:v()(t.busy,[e])}}))}))}}]),a}(g.Component);t.default=Object(j.c)((function(e){var t=e.api.product,a=e.app,n=e.router;return{device:a.device,products:t.tracked,route:Object(N.e)(n),track:t.track}}))(L)}}]);
//# sourceMappingURL=13.97880e7e.chunk.js.map