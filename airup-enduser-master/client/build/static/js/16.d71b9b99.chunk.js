(this["webpackJsonpaircraft-upgrade-www"]=this["webpackJsonpaircraft-upgrade-www"]||[]).push([[16],{342:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(10),r=a(11),i=a(45),c=a(33),s=a(32),o=a(37),l=a.n(o),u=a(23),d=a.n(u),h=a(20),m=a.n(h),p=a(94),f=a.n(p),v=a(1),g=a.n(v),b=a(44),E=a(12),y=a(46),k=a(34),O=(a(343),a(52)),j=a(92),w=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return e=t.call.apply(t,[this].concat(c)),Object(E.a)(Object(i.a)(e),["hide","onSelect","show","toggle"]),e.overlay=g.a.createRef(),e.selected=g.a.createRef(),e.state={active:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.busy,n=t.children,r=t.className,i=t.data,c=void 0===i?{}:i,s=t.disabled,o=t.item,u=t.selected,d=t.title,h=this.state.active,p=this.hide,f=this.show,v=this.toggle;return g.a.createElement("span",{className:Object(b.a)("Selector",r,{active:h,disabled:s}),onClick:Object(E.e)(f)},l()(n)?n({hide:p,show:f,toggle:v}):g.a.createElement(O.a,{value:"fas-caret-down"}),g.a.createElement("div",{className:"selector-overlay",ref:this.overlay},a?g.a.createElement(j.a,null):g.a.createElement("ul",null,m()(c).map((function(t){var a=t===u,n=l()(o)?o(c[t],t):c[t];return g.a.createElement("li",Object.assign({key:t,className:Object(b.a)({active:a}),title:l()(d)?d(c[t]):n},a?{ref:e.selected}:{},{onClick:Object(E.e)(e.onSelect,t)}),n)})))))}},{key:"componentDidMount",value:function(){this.click=Object(y.g)([k.a],this.hide),d()(this.props.reference)||(this.props.reference.current=this.getReference())}},{key:"componentDidUpdate",value:function(e,t){this.props.reference!==e.reference&&(this.props.reference.current=this.getReference()),this.state.active&&(this.props.selected&&this.selected.current?this.overlay.current.scrollTop=this.selected.current.offsetTop-10:this.state.active!==t.active&&(this.overlay.current.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.click.cancel(),d()(this.props.reference)||(this.props.reference.current=null)}},{key:"getReference",value:function(){return f()(this,["hide","show"])}},{key:"hide",value:function(){this.setState({active:!1}),l()(this.props.onHide)&&this.props.onHide()}},{key:"onSelect",value:function(e){l()(this.props.onSelect)&&this.props.onSelect(this.props.data[e],e),this.hide()}},{key:"show",value:function(){this.props.disabled||(this.setState({active:!0}),l()(this.props.onShow)&&this.props.onShow())}},{key:"toggle",value:function(){return this[this.state.active?"hide":"show"]()}}]),a}(v.Component)},343:function(e,t,a){},349:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(3),r=a(0),i=a(10),c=a(11),s=a(33),o=a(32),l=a(37),u=a.n(l),d=a(42),h=a.n(d),m=a(54),p=a.n(m),f=a(20),v=a.n(f),g=a(1),b=a.n(g),E=a(38),y=a(44),k=a(46),O=a(12),j=(a(350),a(52)),w=a(92),R=a(342),S=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={keys:[],selected:[]},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.busy,i=t.children,c=t.data,s=this.state.selected,o=i(),l=o.head,u=o.row;return b.a.createElement("div",{className:Object(y.a)("Table",{busy:a})},a?b.a.createElement(w.a,null):"",b.a.createElement("table",null,b.a.createElement("thead",null,l&&l({selected:s.length&&s.length===this.state.keys.length,sort:function(t,a){if(p()(t))return e.getSortLink(t,a);if(h()(t)){var n=e.props.route.query;return b.a.createElement(R.a,{className:"sort-selector",data:t,item:function(t,a){return e.getSortLink(a,t)},title:function(e){return e}},(function(e){var r=e.toggle;return b.a.createElement("span",{onClick:Object(O.e)(r)},b.a.createElement("span",null,t[n.sort]||a||"Sort by"),b.a.createElement(j.a,{value:"fa-chevron-"+("desc"===n.order?"up":"down")}))}))}},state:this.state,toggle:function(t){e.setState((function(e){return Object(r.a)(Object(r.a)({},e),{},{selected:t?e.keys.slice(0):[]})}))}})),b.a.createElement("tbody",null,this.state.keys.map((function(t,a){var r=s.indexOf(t),i=a%2;return c[t]?b.a.createElement(g.Fragment,{key:t},u(c[t],{even:i,index:a,odd:!i,selected:r>=0,toggle:function(a){a&&r<0?e.setState({selected:[].concat(Object(n.a)(s),[t])}):!a&&r>=0&&e.setState({selected:[].concat(Object(n.a)(s.slice(0,r)),Object(n.a)(s.slice(r+1)))})}})):b.a.createElement(g.Fragment,{key:t})})))))}},{key:"componentDidMount",value:function(){var e=this;if(this.props.infinite){var t=this.props.infinite.action;this.action=Object(k.g)([Object(k.d)(t,"COMPLETE")],(function(){e.checkEnd()})),this.unscroll=Object(O.j)((function(){e.props.busy||e.checkEnd()}))}}},{key:"componentDidUpdate",value:function(e){if(this.props.data!==e.data||this.props.direct&&!this.state.keys.length){var t={keys:v()(this.props.data)};this.setState(t)}}},{key:"componentWillUnmount",value:function(){this.action&&(this.action.cancel(),this.unscroll())}},{key:"checkEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=Object(O.g)(),a=t.height,n=t.position;return n>a-e&&(this.props.infinite&&u()(this.props.infinite.onReachEnd)&&this.props.infinite.onReachEnd(),!0)}},{key:"getSortLink",value:function(e,t){var a=Object(O.l)(this.props.route,e),n=a.active,r=a.icon,i=a.url;return b.a.createElement(E.a,{to:i,className:Object(y.a)("sort",{active:n})},b.a.createElement("span",null,t),b.a.createElement(j.a,{value:"fas-"+r}))}}]),a}(g.Component)},350:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(94),r=a.n(n),i=a(1),c=a.n(i),s=a(10),o=a(11),l=a(33),u=a(32),d=a(44),h=(a(4),a(372),a(92)),m={image:function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).image=Object(i.createRef)(),e.state={busy:!0,height:0,source:"",width:0},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.caption,n=t.media,r=t.zoom,i=this.state,s=i.busy,o=i.source;return c.a.createElement("div",{className:Object(d.a)("Image",{zoom:r}),ref:this.image},s?c.a.createElement(h.a,null):c.a.createElement(c.a.Fragment,null,function(){var t=e.img.width/e.img.height,a=e.state.width/e.state.height>t,r=(a?e.state.height*t:e.state.width)+"px",i=(a?e.state.height:e.state.width/t)+"px";return c.a.createElement("img",{src:o,alt:n.title,style:{width:r,height:i}})}()),a?c.a.createElement("div",{className:"caption"},a):c.a.createElement(c.a.Fragment,null))}},{key:"componentDidMount",value:function(){this.props.media&&this.loadImage()}},{key:"componentDidUpdate",value:function(e){this.props.media&&this.props.media!==e.media&&this.loadImage()}},{key:"loadImage",value:function(){var e=this,t=this.props.media.full_path;/(https\:\/\/)|(http\:\/\/)/g.test(t)||(t="https://d2kijztdgb1j07.cloudfront.net/"+t),this.img=document.createElement("img"),this.img.src=t,this.setState({busy:!0,source:t}),this.useImage()||(this.img.onload=function(){e.useImage()})}},{key:"useImage",value:function(){if(!this.img.width&&!this.img.height)return!1;if(!this.image.current)return!1;var e=this.image.current.getBoundingClientRect(),t=e.height,a=e.width;return this.setState({busy:!1,height:t,width:a}),!0}}]),a}(i.Component)},p={image:["caption","zoom"]};function f(e){var t=e.media,a=t?t.type.split("/")[0]:e.default||"image",n=m[a],i=r()(e,p[a]);return c.a.createElement(n,Object.assign({media:t},i))}},408:function(e,t,a){},409:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t),a.d(t,"sortFields",(function(){return W})),a.d(t,"sortKeys",(function(){return J}));var n=a(18),r=a(0),i=a(10),c=a(11),s=a(45),o=a(33),l=a(32),u=a(122),d=a.n(u),h=a(23),m=a.n(h),p=a(59),f=a.n(p),v=a(20),g=a.n(v),b=a(94),E=a.n(b),y=a(1),k=a.n(y),O=a(27),j=a(38),w=a(44),R=a(369),S=a.n(R),N=a(12),C=a(46),D=a(13),A=a(7),M=a(36),P=(a(408),a(331)),Y=a(354),F=a(52),_=a(373),H=a(37),x=a.n(H),B=a(413),T=(a(409),a(92)),I={active:!0,busy:!1,count:5,items:{},length:0},L=["beginning","middle","end"],U=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={position:-1},Object(N.a)(Object(s.a)(e),["onMiddle","onReachBeginning","onReachEnd"]),e.next=Object(y.createRef)(),e.prev=Object(y.createRef)(),e.slider=Object(y.createRef)(),e.swiper=null,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.disabled,r=this.props.data,i=r.busy,c=r.items,s=this.state.position,o=x()(t);return k.a.createElement("div",{className:Object(w.a)("Slider",a,{busy:i,disabled:n},"position-"+L[s+1]),ref:this.slider},k.a.createElement("div",{className:"slider-wrapper"},g()(c).map((function(e,a){return k.a.createElement("div",{className:"slider-item",key:e},o?t(c[e],a):k.a.createElement(k.a.Fragment,null))})),this.isLoading()?k.a.createElement("div",{className:"slider-item busy"},k.a.createElement(T.a,null)):k.a.createElement(k.a.Fragment,null)),k.a.createElement("div",{className:"slider-prev",ref:this.prev},k.a.createElement(F.a,{value:"fal-chevron-left"})),k.a.createElement("div",{className:"slider-next",ref:this.next},k.a.createElement(F.a,{value:"fal-chevron-right"})))}},{key:"isLoading",value:function(){return(this.props.busy||this.props.data.busy)&&this.props.data.length<this.props.data.count}},{key:"componentDidMount",value:function(){this.swiper=new B.a(this.slider.current,{freeMode:!0,navigation:{nextEl:this.next.current,prevEl:this.prev.current},noSwipingClass:"disabled",slideActiveClass:"slider-item-active",slideClass:"slider-item",slidesPerView:"auto",spaceBetween:10,wrapperClass:"slider-wrapper"}),this.swiper.on("fromEdge",this.onMiddle),this.swiper.on("reachBeginning",this.onReachBeginning),this.swiper.on("reachEnd",this.onReachEnd)}},{key:"componentDidUpdate",value:function(e){this.props.data&&this.props.data!==e.data&&(this.swiper.update(),this.swiper.isBeginning&&this.onReachBeginning(),this.swiper.isEnd&&this.onReachEnd())}},{key:"componentWillUnmount",value:function(){this.swiper.destroy()}},{key:"onMiddle",value:function(){this.setState({position:0}),x()(this.props.onMiddle)&&this.props.onMiddle()}},{key:"onReachBeginning",value:function(){this.setState({position:-1}),x()(this.props.onReachBeginning)&&this.props.onReachBeginning()}},{key:"onReachEnd",value:function(){this.setState({position:1}),x()(this.props.onReachEnd)&&this.props.onReachEnd()}}]),a}(y.Component),z=a(349),q=a(368),W=(a(4),{aircraft_make:"Make",name:"Model",year:"Year"}),J=g()(W),K=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).hangarCancelClick=function(t){e.setState({selectedAircraft:null},(function(){t&&e.reload()}))},e.editAircraft=function(t){return function(){e.setState({selectedAircraft:t},(function(){"function"===typeof e.showHideHanger&&e.showHideHanger()}))}},e.state={products:{},toRemove:[],selectedAircraft:null},Object(N.a)(Object(s.a)(e),["loadProducts","onHideSettings","reload","remove","toggleProducts","selectProduct","bulkRemove"]),e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.busy,n=t.device,r=t.route,i=this.props.aircraft.count,c=d()(["xs","sm"],n),s=this.state.toRemove;return k.a.createElement("div",{className:"Aircraft"},k.a.createElement("div",{className:"description"},"Below contains aircrafts you have saved. You can configure tracking settings for each one of them and receive updates on related FAA-Approved products in the categories you're interested in."),k.a.createElement("div",{className:"description"},k.a.createElement(q.a,{aircraft:this.state.selectedAircraft,withoutAircraft:!0,isHanger:!0,loggedOut:!1,onCancel:this.hangarCancelClick},(function(t){var a=t.show;return e.showHideHanger=a,k.a.createElement("span",{className:Object(w.a)("add-to-hangar",{disabled:!e.state.selectedAircraft}),onClick:a},"+ Add aircraft to hangar")}))),k.a.createElement(z.a,Object.assign({},this.props.aircraft,{route:r}),(function(){return{head:function(t){var a=t.selected,n=t.sort,r=t.toggle;return k.a.createElement(k.a.Fragment,null,k.a.createElement("tr",null,k.a.createElement("th",null,k.a.createElement(P.a,{icon:"fa-minus",value:a,size:"sm",onChange:Object(N.b)(r,!a)},a?"Deselect":"Select"," All (",i,")")),k.a.createElement("th",null),c?k.a.createElement(k.a.Fragment,null):k.a.createElement(k.a.Fragment,null,k.a.createElement("th",null,k.a.createElement(Y.a,{message:"Are you sure you want to remove selected aircrafts from your hangar?",ok:{title:"Remove Aircrafts"},onConfirm:Object(N.b)(e.bulkRemove)},(function(e){var t=e.show;return k.a.createElement("a",{onClick:t,style:{color:"#cf2f37",cursor:"pointer"}},"Remove selected(",s.length,")")}))),k.a.createElement("th",null),k.a.createElement("th",null),k.a.createElement("th",null),k.a.createElement("th",null)),k.a.createElement("th",null,c?n(W):k.a.createElement(k.a.Fragment,null))),c?k.a.createElement(k.a.Fragment,null):k.a.createElement("tr",null,k.a.createElement("th",null),J.map((function(e){return k.a.createElement("th",{key:e},n(e,W[e]))})),k.a.createElement("th",{colSpan:4})))},row:function(t,n){var r=n.index,i=n.odd,s=n.selected,o=n.toggle,l=t._id,u=t.aircraft_model,d=t.year,h=u.aircraft_make,m=u.name,p=(E()(t,["categories","frequency","products"]),e.state.products[l]),f=p&&p.active;return k.a.createElement(k.a.Fragment,null,k.a.createElement("tr",{className:Object(w.a)({odd:i,open:f,selected:s})},k.a.createElement("td",null,k.a.createElement(P.a,{value:s,size:"sm",productId:l,onChange:Object(N.b)(o,!s),onToggle:e.selectProduct})),c?k.a.createElement("td",null,h.name," - ",m,k.a.createElement("br",null),"Year: ",d||"-"):k.a.createElement(k.a.Fragment,null,k.a.createElement("td",null,h.name),k.a.createElement("td",null,m),k.a.createElement("td",null,d||"-"),k.a.createElement("td",{className:"products"},k.a.createElement("span",{className:Object(w.a)("action",{"with-badge":r<=1}),onClick:Object(N.b)(e.toggleProducts,t)},e.putNewTag(t)?k.a.createElement("span",{className:"badge"},"New"):null,k.a.createElement("span",null,f?"Hide":"Show"," related product(s)"))),k.a.createElement("td",{className:"setting"})),k.a.createElement("td",{className:"delete"},k.a.createElement("span",{className:Object(w.a)("add-to-hangar"),onClick:e.editAircraft(t)},k.a.createElement(F.a,{className:"fa-edit"}))),k.a.createElement("td",{className:"delete"},k.a.createElement(Y.a,{message:"Are you sure you want to remove this aircraft from your hangar?",ok:{title:"Remove Aircraft"},onConfirm:Object(N.b)(e.remove,l)},(function(e){var t=e.show;return k.a.createElement(F.a,{value:"fa-trash",onClick:t})})))),f?k.a.createElement("tr",{className:"related"},k.a.createElement("td",{colSpan:7},k.a.createElement(U,{busy:a,disabled:p.busy,className:"products",data:p,onReachEnd:Object(N.b)(e.loadProducts,t)},(function(e){var t=e.certificate,a=e.media,n=e.name,r=e.permalink;return k.a.createElement(k.a.Fragment,null,k.a.createElement(j.a,{to:"/products/"+r},k.a.createElement(_.a,{media:(a||[])[0]}),k.a.createElement("h5",null,n),t?k.a.createElement("h6",null,"(",t.reference,")"):k.a.createElement(k.a.Fragment,null)))})))):k.a.createElement(k.a.Fragment,null))}}})))}},{key:"componentDidMount",value:function(){this.reload()}},{key:"loadProducts",value:function(e){var t=this;if(!this.props.busy){var a=this.state.products[e._id]||I,n=a.length,i=Math.min(a.count-n,5);if(!(i<=0)){var c=S()().subtract(1,"months").format("YYYY-MM-DD"),s={aircraft_model:e.aircraft_model._id,both:1,limit:i,start:n};e.newProductDate&&new Date(c).getTime()<=new Date(S()(new Date(e.newProductDate)).format("YYYY-MM-DD"))&&(s.created_at=c),this.updateProducts(e,{busy:!0},a),Object(C.h)(Object(A.E)(s)).then((function(n){var i=n.count,c=n.results;t.updateProducts(e,{busy:!1,count:i,items:Object(r.a)(Object(r.a)({},a.items),f()(c,"_id")),length:a.length+c.length})})).catch((function(){t.updateProducts(e,{busy:!1})}))}}}},{key:"onHideSettings",value:function(e){var t=e._id,a=e.reload;t&&!0===a&&this.reload()}},{key:"putNewTag",value:function(e){var t=S()().subtract(1,"month").format("YYYY-MM-DD");return e.newProductDate&&new Date(t).getTime()<=new Date(S()(new Date(e.newProductDate)).format("YYYY-MM-DD"))}},{key:"reload",value:function(){this.props.dispatch(Object(D.r)())}},{key:"remove",value:function(e){var t=this;return this.props.dispatch(Object(D.q)(e)),Object(C.e)(Object(C.d)(D.d,"COMPLETE")).then((function(){t.reload()}))}},{key:"bulkRemove",value:function(){for(var e=this.state.toRemove,t=0;t<e.length;t++)this.remove(e[t]);this.setState({toRemove:[]})}},{key:"selectProduct",value:function(e){var t=this.state.toRemove;if(t.includes(a)){for(var a=0;a<t.length;a++)if(t[a]===e){t.splice(a,1);break}}else t.push(e);this.setState({toRemove:t})}},{key:"toggleProducts",value:function(e){m()(this.state.products[e._id])?this.loadProducts(e):this.updateProducts(e,{active:!this.state.products[e._id].active})}},{key:"updateProducts",value:function(e,t,a){this.setState((function(i){return{products:Object(r.a)(Object(r.a)({},i.products),{},Object(n.a)({},e._id,Object(r.a)(Object(r.a)({},a||i.products[e._id]),t)))}}))}}]),a}(y.Component);t.default=Object(O.c)((function(e){var t=e.api,a=t.aircraft,n=t.product,r=e.app,i=e.router;return{aircraft:a.hangar,busy:n.products.busy,device:r.device,route:Object(M.e)(i)}}))(K)}}]);
//# sourceMappingURL=16.d71b9b99.chunk.js.map